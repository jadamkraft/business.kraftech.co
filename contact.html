<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contact | Kraftech.co</title>
  <meta name="description" content="Contact Kraftech.co for retainers, a la carte projects, and compliance-ready IT."/>
  <!-- Preconnects for Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Google Fonts: Montserrat (700,800), Inter (400,500), JetBrains Mono (400,600) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=JetBrains+Mono:wght@400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css"/>
  <style>
    form {max-width:680px;margin:0 auto}
    label {display:block;margin:.5rem 0 .25rem}
    input, textarea {width:100%;padding:.75rem;border:1px solid #ccc;border-radius:6px}
    button[type=submit]{margin-top:1rem}
    .muted{color:#555}
  </style>
</head>
<body>
  <nav class="site-nav" aria-label="Main Navigation">
    <button class="nav-toggle" aria-controls="navMenu" aria-expanded="false" aria-label="Toggle menu">&#9776;</button>
    <ul id="navMenu" class="nav-menu">
      <li><a href="index.html#home">Home</a></li>
      <li class="has-dropdown">
        <a href="services.html">Services</a>
        <ul class="dropdown" aria-label="Services submenu">
          <li><a href="services/network-security.html">Network & Security</a></li>
          <li><a href="services/compliance-surveillance.html">Compliance & Surveillance</a></li>
          <li><a href="services/m365-cloud.html">Microsoft 365 & Cloud</a></li>
          <li><a href="services/automation-ai.html">Automation & AI</a></li>
          <li><a href="services/it-strategy.html">IT Management & Strategy</a></li>
          <li><a href="services/webdev-marketing.html">WebDev & Marketing</a></li>
        </ul>
      </li>
      <li><a href="pricing.html">Pricing</a></li>
      <!-- Blog intentionally unlinked -->
      <li><a aria-current="page" href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <header class="page-header">
    <div class="container">
      <h1 class="reveal">Let’s talk</h1>
      <p class="reveal">Tell us about your business and what you need — retainer or a la carte.</p>
    </div>
  </header>

  <main class="container">
    <form id="contactForm" method="POST" novalidate>
      <label for="name">Name</label>
      <input id="name" name="name" required />

      <label for="email">Email</label>
      <input id="email" name="email" type="email" inputmode="email" required />

      <label for="company">Company</label>
      <input id="company" name="company" />

      <label for="message">What do you need help with?</label>
      <textarea id="message" name="message" rows="6" required></textarea>

      <!-- Hidden fields for funnel context -->
      <input type="hidden" id="page_url" name="page_url" />
      <input type="hidden" id="selected_plan" name="selected_plan" />
      <input type="hidden" name="source" value="website" />

      <button class="cta-button" type="submit">Send</button>
      <p id="status" class="muted" role="status" aria-live="polite" style="margin-top:.75rem;"></p>
    </form>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Kraft Digital Solutions — <strong>kraftech.co</strong></p>
    </div>
  </footer>

  <script src="ui.js" defer></script>
  <script>
    // Prefill hidden fields
    const params = new URLSearchParams(window.location.search);
    const plan = params.get('plan') || '';
    const pageUrl = window.location.href;
    const elPlan = document.getElementById('selected_plan');
    const elPage = document.getElementById('page_url');
    if (elPlan) elPlan.value = plan;
    if (elPage) elPage.value = pageUrl;

    // Simple client-side validation + Formspree POST
    const form = document.getElementById('contactForm');
    const status = document.getElementById('status');
    const FORMSPREE_ENDPOINT = 'https://formspree.io/f/xovdvvnd';

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!form.name.value.trim() || !form.email.value.trim() || !form.message.value.trim()) {
        status.textContent = 'Please fill out all required fields.';
        return;
      }
      status.textContent = 'Sending…';
      try {
        const formData = new FormData(form);
        const res = await fetch(FORMSPREE_ENDPOINT, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } });
        if (res.ok) {
          window.location.href = 'thank-you.html';
        } else {
          status.textContent = 'Something went wrong. Please try again or email us directly.';
        }
      } catch {
        status.textContent = 'Network error. Please try again in a moment.';
      }
    });
  </script>
</body>
</html>
